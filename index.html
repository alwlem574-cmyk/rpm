<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>نظام الوليم RPM</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Auth Screen -->
  <div id="authScreen" class="auth-screen">
    <div class="auth-card">
      <div class="auth-title">نظام الوليم RPM</div>
      <div class="auth-sub">تسجيل الدخول</div>

      <label class="small">البريد الإلكتروني</label>
      <input id="loginEmail" class="input" type="email" autocomplete="username" placeholder="name@example.com" />

      <label class="small" style="margin-top:10px;">كلمة المرور</label>
      <input id="loginPass" class="input" type="password" autocomplete="current-password" placeholder="••••••••" />

      <div class="row-actions" style="margin-top:12px;">
        <button id="btnLogin" class="btn btn-primary">دخول</button>
        <button id="btnLoginDemo" class="btn btn-soft" title="للاختبار">بيانات تجريبية</button>
      </div>

      <div class="notice" style="margin-top:12px;">
        ملاحظة: فعّلي Email/Password من Firebase Auth. أول حساب تُنشئينه كأدمن عبر Firestore (أو استخدمي زر “تهيئة أول أدمن” بعد الدخول).
      </div>

      <div class="row-actions" style="margin-top:12px;">
        <button id="btnBootstrapAdmin" class="btn">تهيئة أول أدمن</button>
      </div>
    </div>
  </div>

  <!-- App Shell -->
  <div id="appShell" class="app hidden">
    <aside id="sidebar" class="sidebar">
      <div class="brand">
        <div class="brand-title">RPM</div>
        <div class="brand-sub">نظام الوليم</div>
      </div>

      <nav class="nav">
        <a class="nav-item active" data-route="dashboard" href="#/dashboard">لوحة التحكم</a>
        <a class="nav-item" data-route="checkin" href="#/checkin">الاستقبال</a>
        <a class="nav-item" data-route="orders" href="#/orders">أوامر الشغل</a>
        <a class="nav-item" data-route="customers" href="#/customers">الزباين</a>
        <a class="nav-item" data-route="vehicles" href="#/vehicles">السيارات</a>
        <a class="nav-item" data-route="oil" href="#/oil">تبديل دهن</a>
        <a class="nav-item" data-route="inventory" href="#/inventory">المخزون</a>
        <a class="nav-item" data-route="invoices" href="#/invoices">الفواتير</a>
        <a class="nav-item" data-route="employees" href="#/employees">الموظفين</a>
        <a class="nav-item" data-route="reports" href="#/reports">التقارير</a>
        <a class="nav-item" data-route="backup" href="#/backup">نسخ احتياطي</a>

        <div class="nav-sep"></div>

        <a class="nav-item" data-route="settings" href="#/settings">إعدادات الفاتورة</a>
        <a class="nav-item" data-route="admin" href="#/admin">لوحة الأدمن</a>
      </nav>

      <div class="sidebar-footer">
        <div class="small" id="userBadge">—</div>
        <div class="row-actions" style="margin-top:10px;">
          <button id="btnNew" class="btn btn-primary">+</button>
          <button id="btnLogout" class="btn btn-soft">خروج</button>
        </div>
      </div>
    </aside>

    <main class="main">
      <header class="topbar">
        <div class="topbar-left">
          <button id="btnMenu" class="iconbtn" aria-label="menu">☰</button>
          <div>
            <div id="pageTitle" class="page-title">لوحة التحكم</div>
            <div id="todayBadge" class="small">—</div>
          </div>
        </div>

        <div class="topbar-right">
          <input id="globalSearch" class="input search" placeholder="بحث..." />
          <button id="btnSeed" class="btn btn-soft" title="بيانات تجريبية">Seed</button>
        </div>
      </header>

      <section id="view" class="view">
        <div class="notice">... جاري التحميل</div>
      </section>

      <div class="tabs">
        <a class="tab active" data-route="dashboard" href="#/dashboard">الرئيسية</a>
        <a class="tab" data-route="orders" href="#/orders">أوامر</a>
        <a class="tab" data-route="customers" href="#/customers">زباين</a>
        <a class="tab" data-route="vehicles" href="#/vehicles">سيارات</a>
        <a class="tab" data-route="more" href="#/more">المزيد</a>
      </div>
    </main>
  </div>

  <!-- Quick Actions Modal -->
  <div id="modal" class="modal hidden">
    <div class="modal-card">
      <div class="modal-head">
        <div>
          <div class="section-title">إضافة سريعة</div>
          <div class="small">اختاري إجراء</div>
        </div>
        <button id="modalClose" class="iconbtn">✕</button>
      </div>

      <div class="grid2" style="margin-top:10px;">
        <button class="btn" data-quick="checkin">استقبال</button>
        <button class="btn" data-quick="oil">تبديل دهن</button>
        <button class="btn" data-quick="customer">+ زبون</button>
        <button class="btn" data-quick="vehicle">+ سيارة</button>
        <button class="btn" data-quick="employee">+ موظف</button>
        <button class="btn" data-quick="part">+ قطعة</button>
      </div>
    </div>
  </div>

  <div id="toast" class="toast hidden"></div>

  <script type="module" src="app.js"></script>
</body>
</html>
